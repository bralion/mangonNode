<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>链接到 Node.js 自有的依赖 | Node.js API 文档</title>
  <link rel="icon" sizes="32x32" type="image/png" href="//static.nodejs.cn/_static/img/favicon.png">
  <script>
    document.write('<link href="http://nodejs.cn/api/addons/' + (location.port?'':'//static.nodejs.cn') + '/_static/css/api.css?1544712009832" rel="stylesheet">')
  </script>
<link rel="icon" sizes="32x32" type="image/png" href="//static.nodejs.cn/_static/img/favicon.png">    <link href="index.css" rel="stylesheet">    <style>        html #hm_t_undefined .hm-t-go-top {position:fixed;right:2px;bottom:2px;z-index:99998;cursor:pointer;width:40px;height:37px!important;text-align:center;white-space:normal;font-size:14px;line-height:17px;padding-top:3px;color:#fff;background:#404040;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAAAXCAYAAABH92JbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMjgwMTE3NDA3MjA2ODExODA4M0UyNDA4ODdDRTZBQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBQjc5RkRFNkI5ODMxMUUzQkZGNDhENEJFQjM2OTcyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBQjc5RkRFNUI5ODMxMUUzQkZGNDhENEJFQjM2OTcyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDI4MDExNzQwNzIwNjgxMTgwODNFMjQwODg3Q0U2QUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDI4MDExNzQwNzIwNjgxMTgwODNFMjQwODg3Q0U2QUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5HPYM5AAACC0lEQVR42uyZTSgEYRjH90NoqaVcpDblvKW2XOSkNh8H5Yac9sBBDqQokiJKSMpNTi5OPo6Ktsgu67JcUHIXWfK1u3b8Xx6Zxuzu+64dM83uv34zNfu8b8/8Z+d5P8YqSZLFJNLsRmyWvIRMKgVD4AhEwA3YAV0pzGwEqyAEwmAddIICHe7FqhnsdQM14FxKLj+ooFiGE2ykiD8GVbJ4I1ELAnTmasMODnAhpVcIFIMicMgRH6Z4IxnUAh4pP3Zu5TVpUOLXDJgWiB8wkEF9IK7IL07X05oUFLjpZ4JXQQOYYwfzafJcoDjVPqw43KE4lWtUTF+AQ8eBqQSsgTaO2E0apJ7URrdCDZOM62hQJfBzGmShOD+1+2XSiYaJ7utkkBsEgEewnYfauZUmzWmU6DuY0sEgLzgArgzbu6i992cu/1WclqXsa1iHIt0DYlnKP0b9fRZu5pWdZs7dWXqa7B80+s//oF5aMSjflGqBPq5BQnFtVv4UmGHjIPEH96PAZ6C5kVMwf6daPzbFKnqCqvx9Bk/yFjSBFTMvcL+1DerAmUA/p9Rm1+y7AHJdgnqwx9EHm1s0gKtc2CpR6gE00/ZHMm3RKxbJlf0kNb2BDrCk8hsbDdvBay5tuiUTGxL7waTs2iLw0YTR9BLZQRwDUVqwjuTS9q3VRB8C1OQUnM6UqdXX/IcADn0IMADs2AqDOPSutQAAAABJRU5ErkJggg==) no-repeat -42px center #666;*background-image:url(http://ecma.bdimg.com/holmes/t-popup-icons-png8.png);_position:absolute;_top:expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight||document.body.clientHeight)-this.offsetHeight-2));}    </style></head>
<body class="alt apidoc" id="page_api_item">
  <div id="api-section-addons">
    <div id="content" class="clearfix">
  
      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>链接到 Node.js 自有的依赖</h1>
          <div id="gtoc">
            <ul>
              <li>
                <a href="addons.html#addons_linking_to_node_js_own_dependencies" tppabs="http://nodejs.cn/api/addons.html#addons_linking_to_node_js_own_dependencies" name="toc">返回上层文档</a>
              </li>
              <li>
                <a href="javascript:if(confirm('http://nodejs.cn/search  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ���?'))window.location='http://nodejs.cn/search'" tppabs="http://nodejs.cn/search" name="toc">搜索</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>
  
        <div id="apicontent">
          <div id="content_left"><p>Node.js &#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E9B;&#x9759;&#x6001;&#x94FE;&#x63A5;&#x5E93;&#xFF0C;&#x6BD4;&#x5982; V8 &#x5F15;&#x64CE;&#x3001;libuv &#x548C; OpenSSL&#x3002;
&#x6240;&#x6709;&#x7684;&#x63D2;&#x4EF6;&#x90FD;&#x9700;&#x8981;&#x94FE;&#x63A5;&#x5230; V8&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x94FE;&#x63A5;&#x5230;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x4F9D;&#x8D56;&#x3002;
&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EA;&#x8981;&#x7B80;&#x5355;&#x5730;&#x5305;&#x542B;&#x76F8;&#x5E94;&#x7684; <code>#include &lt;...&gt;</code> &#x58F0;&#x660E;&#xFF08;&#x5982; <code>#include &lt;v8.h&gt;</code>&#xFF09;&#xFF0C;&#x5219; <code>node-gyp</code> &#x4F1A;&#x81EA;&#x52A8;&#x5B9A;&#x4F4D;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x5934;&#x6587;&#x4EF6;&#x3002;
&#x4F46;&#x662F;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;</p><ul>
<li>
<p>&#x5F53; <code>node-gyp</code> &#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x68C0;&#x6D4B;&#x6307;&#x5B9A;&#x7684; Node.js &#x53D1;&#x884C;&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E0B;&#x8F7D;&#x5B8C;&#x6574;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x5305;&#x6216;&#x53EA;&#x662F;&#x5934;&#x6587;&#x4EF6;&#x3002;
&#x5982;&#x679C;&#x4E0B;&#x8F7D;&#x4E86;&#x5B8C;&#x6574;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x5219;&#x63D2;&#x4EF6;&#x5BF9;&#x5168;&#x5957;&#x7684; Node.js &#x4F9D;&#x8D56;&#x6709;&#x5B8C;&#x5168;&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002;
&#x5982;&#x679C;&#x53EA;&#x4E0B;&#x8F7D;&#x4E86; Node.js &#x7684;&#x6587;&#x4EF6;&#x5934;&#xFF0C;&#x5219;&#x53EA;&#x6709; Node.js &#x5BFC;&#x51FA;&#x7684;&#x7B26;&#x53F7;&#x53EF;&#x7528;&#x3002;</p>
</li>
<li>
<p><code>node-gyp</code> &#x53EF;&#x4F7F;&#x7528;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x672C;&#x5730; Node.js &#x6E90;&#x4EE3;&#x7801;&#x955C;&#x50CF;&#x7684; <code>--nodedir</code> &#x6807;&#x5FD7;&#x6765;&#x8FD0;&#x884C;&#x3002;
&#x5982;&#x679C;&#x4F7F;&#x7528;&#x8BE5;&#x9009;&#x9879;&#xFF0C;&#x5219;&#x63D2;&#x4EF6;&#x6709;&#x5168;&#x5957;&#x4F9D;&#x8D56;&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002;</p>
</li>
</ul></div>
          <div id="content_right"><p>Node.js uses a number of statically linked libraries such as V8, libuv and
OpenSSL. All Addons are required to link to V8 and may link to any of the
other dependencies as well. Typically, this is as simple as including
the appropriate <code>#include &lt;...&gt;</code> statements (e.g. <code>#include &lt;v8.h&gt;</code>) and
<code>node-gyp</code> will locate the appropriate headers automatically. However, there
are a few caveats to be aware of:</p><ul>
<li>
<p>When <code>node-gyp</code> runs, it will detect the specific release version of Node.js
and download either the full source tarball or just the headers. If the full
source is downloaded, Addons will have complete access to the full set of
Node.js dependencies. However, if only the Node.js headers are downloaded, then
only the symbols exported by Node.js will be available.</p>
</li>
<li>
<p><code>node-gyp</code> can be run using the <code>--nodedir</code> flag pointing at a local Node.js
source image. Using this option, the Addon will have access to the full set of
dependencies.</p>
</li>
</ul></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.write('<script src="' + (location.port ? '' : 'http://static.nodejs.cn/') + '/_static/js/api.js?1544712009832"><\/script>');
  </script>
</body>
</html>