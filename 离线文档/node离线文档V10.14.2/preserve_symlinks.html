<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>--preserve-symlinks | Node.js API 文档</title>
  <link rel="icon" sizes="32x32" type="image/png" href="//static.nodejs.cn/_static/img/favicon.png">
  <script>
    document.write('<link href="http://nodejs.cn/api/cli/' + (location.port?'':'//static.nodejs.cn') + '/_static/css/api.css?1544712013499" rel="stylesheet">')
  </script>
<link rel="icon" sizes="32x32" type="image/png" href="//static.nodejs.cn/_static/img/favicon.png">    <link href="index.css" rel="stylesheet">    <style>        html #hm_t_undefined .hm-t-go-top {position:fixed;right:2px;bottom:2px;z-index:99998;cursor:pointer;width:40px;height:37px!important;text-align:center;white-space:normal;font-size:14px;line-height:17px;padding-top:3px;color:#fff;background:#404040;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAAAXCAYAAABH92JbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMjgwMTE3NDA3MjA2ODExODA4M0UyNDA4ODdDRTZBQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBQjc5RkRFNkI5ODMxMUUzQkZGNDhENEJFQjM2OTcyRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBQjc5RkRFNUI5ODMxMUUzQkZGNDhENEJFQjM2OTcyRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDI4MDExNzQwNzIwNjgxMTgwODNFMjQwODg3Q0U2QUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDI4MDExNzQwNzIwNjgxMTgwODNFMjQwODg3Q0U2QUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5HPYM5AAACC0lEQVR42uyZTSgEYRjH90NoqaVcpDblvKW2XOSkNh8H5Yac9sBBDqQokiJKSMpNTi5OPo6Ktsgu67JcUHIXWfK1u3b8Xx6Zxuzu+64dM83uv34zNfu8b8/8Z+d5P8YqSZLFJNLsRmyWvIRMKgVD4AhEwA3YAV0pzGwEqyAEwmAddIICHe7FqhnsdQM14FxKLj+ooFiGE2ykiD8GVbJ4I1ELAnTmasMODnAhpVcIFIMicMgRH6Z4IxnUAh4pP3Zu5TVpUOLXDJgWiB8wkEF9IK7IL07X05oUFLjpZ4JXQQOYYwfzafJcoDjVPqw43KE4lWtUTF+AQ8eBqQSsgTaO2E0apJ7URrdCDZOM62hQJfBzGmShOD+1+2XSiYaJ7utkkBsEgEewnYfauZUmzWmU6DuY0sEgLzgArgzbu6i992cu/1WclqXsa1iHIt0DYlnKP0b9fRZu5pWdZs7dWXqa7B80+s//oF5aMSjflGqBPq5BQnFtVv4UmGHjIPEH96PAZ6C5kVMwf6daPzbFKnqCqvx9Bk/yFjSBFTMvcL+1DerAmUA/p9Rm1+y7AHJdgnqwx9EHm1s0gKtc2CpR6gE00/ZHMm3RKxbJlf0kNb2BDrCk8hsbDdvBay5tuiUTGxL7waTs2iLw0YTR9BLZQRwDUVqwjuTS9q3VRB8C1OQUnM6UqdXX/IcADn0IMADs2AqDOPSutQAAAABJRU5ErkJggg==) no-repeat -42px center #666;*background-image:url(http://ecma.bdimg.com/holmes/t-popup-icons-png8.png);_position:absolute;_top:expression(eval(document.documentElement.scrollTop+(document.documentElement.clientHeight||document.body.clientHeight)-this.offsetHeight-2));}    </style></head>
<body class="alt apidoc" id="page_api_item">
  <div id="api-section-cli">
    <div id="content" class="clearfix">
  
      <div id="column1" data-id="__ID__" class="interior">
        <header>
          <h1>--preserve-symlinks</h1>
          <div id="gtoc">
            <ul>
              <li>
                <a href="cli.html#cli_preserve_symlinks" tppabs="http://nodejs.cn/api/cli.html#cli_preserve_symlinks" name="toc">返回上层文档</a>
              </li>
              <li>
                <a href="javascript:if(confirm('http://nodejs.cn/search  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ���?'))window.location='http://nodejs.cn/search'" tppabs="http://nodejs.cn/search" name="toc">搜索</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>
  
        <div id="apicontent">
          <div id="content_left"><div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v6.3.0</span>
</div><p>&#x5F53;&#x89E3;&#x6790;&#x548C;&#x7F13;&#x5B58;&#x6A21;&#x5757;&#x65F6;&#xFF0C;&#x547D;&#x4EE4;&#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x5668;&#x4FDD;&#x6301;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x3002;</p><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53; Node.js &#x4ECE;&#x4E00;&#x4E2A;&#x88AB;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x5230;&#x53E6;&#x4E00;&#x5757;&#x78C1;&#x76D8;&#x4F4D;&#x7F6E;&#x7684;&#x8DEF;&#x5F84;&#x52A0;&#x8F7D;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x65F6;&#xFF0C;Node.js &#x4F1A;&#x89E3;&#x5F15;&#x7528;&#x8BE5;&#x8FDE;&#x63A5;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x6A21;&#x5757;&#x7684;&#x771F;&#x5B9E;&#x78C1;&#x76D8;&#x7684;&#x5B9E;&#x9645;&#x8DEF;&#x5F84;&#xFF0C;&#x4F5C;&#x4E3A;&#x5B9A;&#x4F4D;&#x5176;&#x4ED6;&#x4F9D;&#x8D56;&#x6A21;&#x5757;&#x7684;&#x6807;&#x8BC6;&#x7B26;&#x548C;&#x6839;&#x8DEF;&#x5F84;&#x3002;
&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x662F;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x3002;
&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x7684;&#x540C;&#x884C;&#x4F9D;&#x8D56;&#xFF0C;&#x5982;&#x4E0B;&#x4F8B;&#x5B50;&#x6240;&#x63CF;&#x8FF0;&#x7684;&#xFF0C;&#x5982;&#x679C; <code>moduleA</code> &#x8BD5;&#x56FE;&#x5F15;&#x5165; <code>moduleB</code> &#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x540C;&#x884C;&#x4F9D;&#x8D56;&#xFF0C;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF1A;</p><pre><code class="language-text">{appDir}
 &#x251C;&#x2500;&#x2500; app
 &#x2502;   &#x251C;&#x2500;&#x2500; index.js
 &#x2502;   &#x2514;&#x2500;&#x2500; node_modules
 &#x2502;       &#x251C;&#x2500;&#x2500; moduleA -&gt; {appDir}/moduleA
 &#x2502;       &#x2514;&#x2500;&#x2500; moduleB
 &#x2502;           &#x251C;&#x2500;&#x2500; index.js
 &#x2502;           &#x2514;&#x2500;&#x2500; package.json
 &#x2514;&#x2500;&#x2500; moduleA
     &#x251C;&#x2500;&#x2500; index.js
     &#x2514;&#x2500;&#x2500; package.json
</code></pre><p><code>--preserve-symlinks</code> &#x547D;&#x4EE4;&#x884C;&#x6807;&#x5FD7;&#x547D;&#x4EE4; Node.js &#x4F7F;&#x7528;&#x6A21;&#x5757;&#x7684;&#x7B26;&#x53F7;&#x8DEF;&#x5F84;&#x800C;&#x4E0D;&#x662F;&#x771F;&#x5B9E;&#x8DEF;&#x5F84;&#xFF0C;&#x662F;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x7684;&#x540C;&#x884C;&#x4F9D;&#x8D56;&#x80FD;&#x88AB;&#x627E;&#x5230;&#x3002;</p><p>&#x6CE8;&#x610F;&#xFF0C;&#x4F7F;&#x7528; <code>--preserve-symlinks</code> &#x4F1A;&#x6709;&#x5176;&#x4ED6;&#x65B9;&#x9762;&#x7684;&#x5F71;&#x54CD;&#x3002;
&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x7B26;&#x53F7;&#x8FDE;&#x63A5;&#x7684;&#x539F;&#x751F;&#x6A21;&#x5757;&#x5728;&#x4F9D;&#x8D56;&#x6811;&#x91CC;&#x6765;&#x81EA;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5B83;&#x4EEC;&#x4F1A;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x3002;
&#xFF08;Node.js &#x4F1A;&#x5C06;&#x5B83;&#x4EEC;&#x89C6;&#x4E3A;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x4E14;&#x4F1A;&#x8BD5;&#x56FE;&#x591A;&#x6B21;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#xFF0C;&#x9020;&#x6210;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;&#xFF09;</p></div>
          <div id="content_right"><div class="api_metadata">
<span>Added in: v6.3.0</span>
</div><p>Instructs the module loader to preserve symbolic links when resolving and
caching modules.</p><p>By default, when Node.js loads a module from a path that is symbolically linked
to a different on-disk location, Node.js will dereference the link and use the
actual on-disk &quot;real path&quot; of the module as both an identifier and as a root
path to locate other dependency modules. In most cases, this default behavior
is acceptable. However, when using symbolically linked peer dependencies, as
illustrated in the example below, the default behavior causes an exception to
be thrown if <code>moduleA</code> attempts to require <code>moduleB</code> as a peer dependency:</p><pre><code class="language-text">{appDir}
 &#x251C;&#x2500;&#x2500; app
 &#x2502;   &#x251C;&#x2500;&#x2500; index.js
 &#x2502;   &#x2514;&#x2500;&#x2500; node_modules
 &#x2502;       &#x251C;&#x2500;&#x2500; moduleA -&gt; {appDir}/moduleA
 &#x2502;       &#x2514;&#x2500;&#x2500; moduleB
 &#x2502;           &#x251C;&#x2500;&#x2500; index.js
 &#x2502;           &#x2514;&#x2500;&#x2500; package.json
 &#x2514;&#x2500;&#x2500; moduleA
     &#x251C;&#x2500;&#x2500; index.js
     &#x2514;&#x2500;&#x2500; package.json
</code></pre><p>The <code>--preserve-symlinks</code> command line flag instructs Node.js to use the
symlink path for modules as opposed to the real path, allowing symbolically
linked peer dependencies to be found.</p><p>Note, however, that using <code>--preserve-symlinks</code> can have other side effects.
Specifically, symbolically linked <em>native</em> modules can fail to load if those
are linked from more than one location in the dependency tree (Node.js would
see those as two separate modules and would attempt to load the module multiple
times, causing an exception to be thrown).</p><p>The <code>--preserve-symlinks</code> flag does not apply to the main module, which allows
<code>node --preserve-symlinks node_module/.bin/&lt;foo&gt;</code> to work.  To apply the same
behavior for the main module, also use <code>--preserve-symlinks-main</code>.</p></div>
          <div></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    document.write('<script src="' + (location.port ? '' : 'http://static.nodejs.cn/') + '/_static/js/api.js?1544712013499"><\/script>');
  </script>
</body>
</html>